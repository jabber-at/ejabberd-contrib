--- a/mod_cron/src/mod_cron.erl
+++ b/mod_cron/src/mod_cron.erl
@@ -25,7 +25,11 @@
 -include("ejabberd_http.hrl").
 -include("ejabberd_web_admin.hrl").
 -include("logger.hrl").
+-ifdef(NO_EXT_LIB).
 -include("xml.hrl").
+-else.
+-include_lib("p1_xml/include/xml.hrl").
+-endif.
 
 -record(task, {taskid, timerref, host, task}).
 
